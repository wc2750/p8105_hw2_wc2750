p8105\_hw2\_wc2750
================
Weixi Chen
9/27/2020

``` r
# load library
library(tidyverse)
library(readxl)
library(dplyr)
```

## Problem 1

First, define a path to the dataset.

``` r
path_to_data = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx"
```

Read the Mr. Trashwheel dataset.

``` r
trashwheel_df = 
  read_xlsx(path = path_to_data,
            sheet = "Mr. Trash Wheel",
            range = cell_cols("A:N")) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read precipitation data for 2018 and 2017

``` r
precip_2018 = 
  read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
             sheet = "2018 Precipitation",
             skip = 1
            ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate (year = 2018) %>%
  relocate (year)

precip_2017 = 
  read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
             sheet = "2017 Precipitation",
             skip = 1
            ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate (year = 2017) %>%
  relocate (year)
```

Now combine annual precipitation

``` r
month_df =
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018, precip_2017)

left_join(precip_df, month_df, by = "month")
```

    ## # A tibble: 24 x 4
    ##     year month total month_name
    ##    <dbl> <dbl> <dbl> <chr>     
    ##  1  2018     1  0.94 January   
    ##  2  2018     2  4.8  February  
    ##  3  2018     3  2.69 March     
    ##  4  2018     4  4.69 April     
    ##  5  2018     5  9.27 May       
    ##  6  2018     6  4.77 June      
    ##  7  2018     7 10.2  July      
    ##  8  2018     8  6.45 August    
    ##  9  2018     9 10.5  September 
    ## 10  2018    10  2.12 October   
    ## # ... with 14 more rows

This dataset contains information from the Mr. Trashwheel trash
collector in Baltimore, Maryland. As trash enters the inner harbor, the
trashwheel collects that trash, and stores it in a dumpster. The dataset
contains information on year, month, and trash collected, include some
specific kinds of trash. There are a total of 344 rows in our final
dataset. Additional data sheets include month precipitation data. The
total precipitaion in 2018 is 70.33. The median number of sports balls
in a dumpster in 2017 is 8.

## Problem 2

Read and clean the NYC Transit dataset.

``` r
nyctransit_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, route1:route11, entrance_type, entry, vending, ada) %>%
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

The NYC Transit dataset includes variables: line, station\_name,
station\_latitude, station\_longitude, route1, route2, route3, route4,
route5, route6, route7, route8, route9, route10, route11,
entrance\_type, entry, vending, ada. As so far, I’ve cleaned the
columns’ names, selected the wanted columns, and converted the entry
variable from character (YES vs NO) to a logical variable. The dimension
of this dataset is 1868 rows \* 19 columns.

Additional information about NYC Transit dataset.

``` r
# reformat distinct stations dataset
diststation_df = distinct(nyctransit_df, line, station_name, .keep_all = TRUE)
# number of distinct stations
nrow(diststation_df)
```

    ## [1] 465

``` r
# number of stations are ADA compliant
nrow(filter(diststation_df, ada == "TRUE"))
```

    ## [1] 84

``` r
# proportion of station entrances/exits without vending allow entrance
sum(nyctransit_df$vending == "NO" & nyctransit_df$entry == "TRUE")/sum(nyctransit_df$vending == "NO")
```

    ## [1] 0.3770492

Reformat data with distinct route number and route name

``` r
# reformat distinct route number and route name dataset for distinct stations
route_diststation_df = diststation_df %>%
  # convert route8:route11 to character variable
  mutate_at(vars(route8:route11), as.character) %>% 
  pivot_longer(
  route1:route11,
  names_to = "route",
  values_to = "train")
```

Additional information about serving A train

``` r
# number of distinct stations serve the A train
nrow(filter(route_diststation_df, train == "A"))
```

    ## [1] 60

``` r
# number of distinct stations serve the A trian and are ADA compliant
nrow(filter(route_diststation_df, train == "A" & ada == "TRUE"))
```

    ## [1] 17
